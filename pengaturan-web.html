<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pengaturan Website - Admin</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
:root{--primary:#003366;--secondary:#006699;--accent:#ffd000}
body{display:flex;min-height:100vh;background:#f2f6fc;font-family:'Segoe UI',sans-serif}
.sidebar{width:260px;background:var(--primary);color:white;position:fixed;height:100vh;padding:24px}
.sidebar ul{list-style:none;padding:0}
.sidebar ul li{padding:11px;border-radius:6px;margin-bottom:8px;cursor:pointer}
.sidebar ul li.active,.sidebar ul li:hover{background:var(--secondary)}
.content{margin-left:260px;padding:30px;width:100%}
.section-box{background:white;border-radius:10px;padding:22px;margin-bottom:25px;box-shadow:0 6px 16px rgba(0,0,0,.07)}
.preview-logo{max-height:90px;margin-top:8px}
.banner-preview img{max-height:120px;margin-right:8px;border-radius:6px}
</style>
</head>
<body>

<!-- SIDEBAR -->
<div class="sidebar">
  <h2 class="fw-bold mb-4">Admin Panel</h2>
  <ul>
    <li onclick="location.href='dashboard.html'"><i class="fa fa-gauge me-2"></i> Dashboard</li>
    <li onclick="location.href='kelola-paket.html'"><i class="fa fa-wifi me-2"></i> Kelola Paket</li>
    <li onclick="location.href='kelola-testimoni.html'"><i class="fa fa-comment me-2"></i> Kelola Testimoni</li>
    <li onclick="location.href='kelola-pesan.html'"><i class="fa fa-envelope me-2"></i> Pesan Kontak</li>
    <li onclick="location.href='kelola-peta.html'"><i class="fa fa-map me-2"></i> Kelola Peta</li>
    <li class="active"><i class="fa fa-gear me-2"></i> Pengaturan Website</li>
  </ul>
  <button class="btn mt-3" style="background:var(--accent);color:#003366;width:100%;" onclick="location.href='admin-login.html'">Logout</button>
</div>

<!-- CONTENT -->
<div class="content">
  <h1 class="fw-bold mb-4">Pengaturan Website</h1>

  <!-- Logo -->
  <div class="section-box">
    <h5 class="fw-bold">Logo Website</h5>
    <input type="file" id="inputLogo" accept="image/*" class="form-control w-50">
    <img id="logoPreview" class="preview-logo d-none" alt="Logo Preview">
    <button class="btn btn-success mt-2" onclick="saveLogo()"><i class="fa fa-save"></i> Simpan Logo</button>
  </div>

  <!-- Banner -->
  <div class="section-box">
    <h5 class="fw-bold">Banner / Slider</h5>
    <input type="file" id="inputBanner" accept="image/*" class="form-control mb-2">
    <button class="btn btn-primary mb-2" onclick="addBanner()">Tambah Banner</button>
    <div id="bannerPreview" class="banner-preview d-flex flex-wrap"></div>
  </div>

  <!-- Informasi Kontak -->
  <div class="section-box">
    <h5 class="fw-bold">Kontak & Media Sosial</h5>
    <input id="wa" class="form-control mb-2" placeholder="Nomor WhatsApp">
    <input id="email" class="form-control mb-2" placeholder="Email">
    <input id="alamat" class="form-control mb-2" placeholder="Alamat">
    <input id="jam" class="form-control mb-2" placeholder="Jam Operasional">
    <input id="instagram" class="form-control mb-2" placeholder="Instagram URL">
    <input id="facebook" class="form-control mb-2" placeholder="Facebook URL">
    <button class="btn btn-success" onclick="saveContact()"><i class="fa fa-save"></i> Simpan</button>
  </div>

  <!-- Text -->
  <div class="section-box">
    <h5 class="fw-bold">Teks Website</h5>
    <textarea id="tagline" class="form-control mb-2" placeholder="Slogan / tagline"></textarea>
    <textarea id="footer" class="form-control mb-2" placeholder="Teks footer website"></textarea>
    <button class="btn btn-success" onclick="saveText()"><i class="fa fa-save"></i> Simpan</button>
  </div>
</div>

<script>
const KEY = "afnalink_settings";
function load(){ return JSON.parse(localStorage.getItem(KEY) || "{}"); }
function save(data){ localStorage.setItem(KEY, JSON.stringify(data)); }

/* INIT */
const data = load();

/* Logo */
if(data.logo){ logoPreview.src = data.logo; logoPreview.classList.remove("d-none"); }
function saveLogo(){
  const file = inputLogo.files[0];
  if(!file) return alert("Pilih file dulu.");
  const reader = new FileReader();
  reader.onload = e => {
    data.logo = e.target.result;
    save(data);
    logoPreview.src = data.logo;
    logoPreview.classList.remove("d-none");
    alert("Logo berhasil disimpan!");
  };
  reader.readAsDataURL(file);
}

/* Banner */
if(!data.banners) data.banners = [];
renderBanner();
function addBanner(){
  const file = inputBanner.files[0];
  if(!file) return alert("Pilih file dulu.");
  const r = new FileReader();
  r.onload = e => {
    data.banners.push(e.target.result);
    save(data);
    renderBanner();
  };
  r.readAsDataURL(file);
}
function renderBanner(){
  bannerPreview.innerHTML = "";
  data.banners.forEach((b,i)=>{
    bannerPreview.innerHTML += `
      <div class="position-relative mb-2">
        <img src="${b}" style="max-height:120px;border-radius:6px">
        <button onclick="removeBanner(${i})" class="btn btn-danger btn-sm position-absolute" style="top:5px;right:5px"><i class="fa fa-times"></i></button>
      </div>`;
  });
}
function removeBanner(i){
  if(confirm("Hapus banner?")){
    data.banners.splice(i,1);
    save(data);
    renderBanner();
  }
}

/* Kontak */
["wa","email","alamat","jam","instagram","facebook"].forEach(k=>{ if(data[k]) document.getElementById(k).value = data[k]; });
function saveContact(){
  ["wa","email","alamat","jam","instagram","facebook"].forEach(k=>{ data[k] = document.getElementById(k).value; });
  save(data);
  alert("Kontak berhasil disimpan!");
}

/* Text */
["tagline","footer"].forEach(k=>{ if(data[k]) document.getElementById(k).value = data[k]; });
function saveText(){
  ["tagline","footer"].forEach(k=>{ data[k] = document.getElementById(k).value; });
  save(data);
  alert("Teks berhasil disimpan!");
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
